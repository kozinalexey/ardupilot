# hw definition file for processing by chibios_pins.py
# for F4BY MINI board with F405 CPU
MCU STM32F4xx STM32F405xx
RAM_SIZE_KB 128
CCM_RAM_SIZE_KB 64

# board ID for firmware load.  must to correspond with bootloader ID
APJ_BOARD_ID 21 

# crystal frequency
OSCILLATOR_HZ 8000000
FLASH_SIZE_KB 1024

STM32_PLLM_VALUE 8
STM32_ST_USE_TIMER 5
# board voltage
STM32_VDD 330U

PA13 JTMS-SWDIO SWD
PA14 JTCK-SWCLK SWD

PA11 OTG_FS_DM OTG1
PA12 OTG_FS_DP OTG1
PA9 VBUS INPUT

define HAL_STORAGE_SIZE 16384
# todo enable RAMTROM parameter storage and remove HAL_USE_EMPTY_STORAGE after tests
# define HAL_WITH_RAMTRON 1
define HAL_USE_EMPTY_STORAGE 1
# space to reserve for bootloader and storage at start of flash
FLASH_RESERVE_START_KB 16
# space to reserve for storage at end of flash
FLASH_RESERVE_END_KB 0


# serial port for stdout
STDOUT_SERIAL SD3
STDOUT_BAUDRATE 57600

# order of UARTs (and USB)
UART_ORDER OTG1 UART5 UART4 USART3 

# UART4 telemertry
PA0 UART4_TX UART4
PA1 UART4_RX UART4

# UART5 GPS
PC12 UART4_TX UART4
PD2  UART4_RX UART4

# USART3 GPS2 / flexi
PB10 USART3_TX USART3 NODMA
PB11 USART3_RX USART3 NODMA

PC0 BATT_VOLTAGE_SENS ADC1
PC1 BATT_CURRENT_SENS ADC1 
PC2 PRESSURE_SENS ADC1 
PA2 RSSI_IN ADC1
PC3 VDD_5V_SENS ADC1 SCALE(2)


# order of I2C buses
I2C_ORDER I2C1 
PB8 I2C1_SCL I2C1 
PB9 I2C1_SDA I2C1 

#SPI1 internal
PA5 SPI1_SCK SPI1
PA6 SPI1_MISO SPI1
PA7 SPI1_MOSI SPI1
PA4 MPU_CS CS

# radio DMA_CH ?
PA3 TIM9_CH1 TIM9 RCIN FLOAT LOW 
# sbus inverter 
PB2 SBUS_INV OUTPUT


# PWM out pins
PB14 TIM12_CH1 TIM12 PWM(1)
PB15 TIM12_CH2 TIM12 PWM(2)
PC6  TIM8_CH1   TIM8 PWM(3)
PC7  TIM8_CH2   TIM8 PWM(4)
PC8  TIM3_CH3   TIM3 PWM(5)
PC9  TIM3_CH4   TIM3 PWM(6)
PA8  TIM1_CH1   TIM1 PWM(7)
PA1  TIM1_CH3   TIM1 PWM(8)


define HAL_COMPASS_DEFAULT HAL_COMPASS_NONE

define HAL_INS_DEFAULT HAL_INS_NONE
define HAL_BARO_DEFAULT HAL_BARO_NONE

